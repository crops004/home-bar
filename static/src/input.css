@import "tailwindcss";

@layer base {
  html {
    scrollbar-gutter: stable;
  }

  @supports not (scrollbar-gutter: stable) {
    html {
      overflow-y: scroll;
    }
  }

  /* Keep form controls at 16px+ to prevent iOS zooming on focus */
  input,
  select,
  textarea {
    font-size: 16px;
  }
}

/* Optional: only if you use Tailwind plugins */
@layer components {
  /* Toast notification */
  .toast {
    @apply fixed bottom-6 right-4 sm:right-6 z-[9999] w-[calc(100vw-2rem)] sm:w-auto sm:min-w-80 sm:max-w-md rounded-xl border border-logo/40 bg-gradient-to-br from-background-mid to-background-dark px-4 py-3 text-sm font-medium leading-5 text-text-normal shadow-2xl ring-1 ring-logo/20 backdrop-blur-sm opacity-0 translate-y-2 scale-[0.98] transition-[opacity,transform] duration-300;
  }

  .toast.show {
    @apply opacity-100 translate-y-0 scale-100;
  }
}

@layer utilities {
  .flex-center {
    @apply flex items-center justify-center;
  }
  .filter-btn {
    @apply inline-flex items-center gap-2 rounded-full border border-border px-3 py-1 text-xs text-text-muted hover:bg-background-light transition;
  }
}
  
@theme {
  --color-background-dark: oklch(0.1 0 20);
  --color-background-mid: oklch(0.15 0 20);
  --color-background-light: oklch(0.2 0 20);
  --color-text-normal: oklch(0.96 0 20);
  --color-text-muted: oklch(0.76 0 20);
  --color-border: oklch(0.4 0 20);
  --color-border-muted: oklch(0.3 0 20);
  --color-primary: oklch(0.76 0.1 20);
  --color-secondary: oklch(0.76 0.1 200);
  --color-danger: oklch(0.7 0.05 30);
  --color-warning: oklch(0.7 0.05 100);
  --color-success: oklch(0.7 0.05 160);
  --color-info: oklch(0.7 0.05 260);
  --color-light-bg-dark: oklch(0.92 0 20);
  --color-light-bg-mid: oklch(0.96 0 20);
  --color-light-bg-light: oklch(1 0 20);
  --color-light-text-normal: oklch(0.15 0 20);
  --color-light-text-muted: oklch(0.4 0 20);
  --color-light-highlight: oklch(1 0 20);
  --color-light-border: oklch(0.6 0 20);
  --color-light-border-muted: oklch(0.7 0 20);
  --color-light-primary: oklch(0.4 0.1 20);
  --color-light-secondary: oklch(0.4 0.1 200);
  --color-light-danger: oklch(0.5 0.05 30);
  --color-light-warning: oklch(0.5 0.05 100);
  --color-light-success: oklch(0.5 0.05 160);
  --color-light-info: oklch(0.5 0.05 260);
  --color-logo: hsl(40.82, 65.99%, 71.18%);
  --color-logo-dark: hsl(40.82, 65.99%, 36%);
}

@layer components {
  .ui-card {
    @apply rounded-2xl border border-border bg-background-mid shadow-lg overflow-hidden;
  }

  .ui-card-interactive {
    @apply transition-[border-color,box-shadow,background-color] duration-200;
  }

  .ui-card-interactive:hover,
  .ui-card-interactive:focus-within {
    @apply border-logo ring-1 ring-logo/40;
  }

  .ui-card-header {
    @apply transition-colors duration-200 rounded-t-2xl;
  }

  .ui-card-header:hover {
    @apply bg-logo/10;
  }

  .ui-card-header[aria-expanded="false"] {
    @apply rounded-b-2xl;
  }

  .recipe-group-grid {
    gap: 1rem;
    grid-auto-flow: dense;
    grid-auto-rows: 8px;
    align-content: start;
  }

  .recipe-card {
    @apply self-start;
    z-index: 1;
  }

  .recipe-card.is-active {
    z-index: 20;
  }

  .recipe-card-toggle {
    min-height: 88px;
  }

  .recipe-details-stack {
    @apply flex flex-col gap-6;
  }

  .modal-backdrop {
    @apply fixed inset-0 z-[999] flex items-center justify-center bg-black/70 backdrop-blur-sm p-4;
  }
  .modal-panel {
    @apply w-full max-w-3xl rounded-3xl border border-border bg-background-dark text-text-normal shadow-2xl overflow-hidden;
  }
  .modal-header {
    @apply flex items-center justify-between border-b border-border bg-background-mid px-6 py-4;
  }
  .modal-body {
    @apply max-h-[75vh] overflow-y-auto bg-background-dark px-6 py-4 space-y-4;
  }
  .modal-footer {
    @apply border-t border-border bg-background-mid px-6 py-4 flex justify-end gap-3;
  }
  .modal-input {
    @apply rounded-lg border border-border bg-background-light px-3 py-2 text-base text-text-normal focus:outline-none focus:ring-2 focus:ring-logo;
  }
  .modal-label {
    @apply text-xs uppercase tracking-wide text-text-muted;
  }
  .modal-button-primary {
    @apply rounded-full bg-logo px-4 py-2 text-sm font-medium text-light-text-normal hover:ring-2 hover:ring-logo transition;
  }
  .modal-button-secondary {
    @apply rounded-full border border-border px-4 py-2 text-sm text-text-normal hover:bg-background-light transition;
  }
  .modal-button-danger {
    @apply rounded-full bg-red-600 px-4 py-2 text-sm font-medium text-light-text-normal hover:bg-red-500 transition;
  }
  .ingredient-dropdown {
    @apply absolute left-0 right-0 top-full z-30 mt-2 rounded-xl border border-border bg-background-dark text-sm text-text-normal shadow-2xl max-h-60 overflow-y-auto;
  }
  .ingredient-dropdown--above {
    @apply top-auto bottom-full mt-0 mb-2;
  }
  .ingredient-option {
    @apply w-full text-left px-3 py-2 text-sm text-text-normal transition hover:bg-background-mid focus:bg-background-mid focus:outline-none;
  }
  .ingredient-option-add {
    @apply text-logo hover:bg-logo/20 focus:bg-logo/20;
  }
  .ingredient-option-empty {
    @apply px-3 py-2 text-sm text-text-muted;
  }
}
